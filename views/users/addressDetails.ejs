<%- include("../layouts/users/header.ejs") %>
<!--=============== CSS ===============-->
<link rel="stylesheet" href="/css/users/homepage.css" />
<link rel="stylesheet" href="/css/users/addressDetails.css" />
<!--=============== MAIN ===============-->
<main class="main">
  <!--=============== BREADCRUMB ===============-->
  <section class="breadcrumb">
    <ul class="breadcrumb__list flex container">
      <li><a href="/" class="breadcrumb__link">Home</a></li>
      <li><span class="breadcrumb__link">></span></li>
      <li><span class="breadcrumb__link">Address</span></li>
    </ul>
  </section>

  <!--=============== ACCOUNTS ===============-->
  <section class="accounts section--lg">
    <div class="accounts__container container grid">
      <div class="account__tabs">
        <a href="/accountDetails" class="account__tab">
          <i class="fi fi-rs-settings"></i> Account details
        </a>
        <a href="/orders" class="account__tab">
          <i class="fi fi-rs-shopping-bag"></i> Orders
        </a>
        <a href="/address" class="account__tab active-tab">
          <i class="fi fi-rs-marker"></i> My Address
        </a>
        <a href="/wallet" class="account__tab">
          <i class="fi fi-rs-wallet"></i> Wallet
        </a>
        <a href="/forgot-password" class="account__tab">
          <i class="fi fi-rs-key"></i> Change Password
        </a>
        <a href="/logout" class="account__tab">
          <i class="fi fi-rs-exit"></i> Logout
        </a>
      </div>
      <div class="tabs__content">
        <div class="tab__content active-tab" content id="address">
          <div class="tab__header">
            <div class="d-flex justify-content-between align-items-center">
              <h3>Shipping Address</h3>
              <a href="/add-address" class="add-address-btn">
                <i class="fi fi-rs-plus"></i> Add New Address
              </a>
            </div>
          </div>

          <div class="addresses-container">
            <% if (addresses && addresses.length > 0) { %> <% for (let i = 0; i
            < addresses.length; i++) { %> <% for (let j = 0; j <
            addresses[i].address.length; j++) { %>
            <div class="address-card">
              <div class="type"><%= addresses[i].address[j].addressType %></div>
              <address class="address">
                <strong><%= addresses[i].address[j].name %></strong><br />
                <%= addresses[i].address[j].city %><br />
                <%= addresses[i].address[j].landMark %><br />
                <%= addresses[i].address[j].state %> - <%=
                addresses[i].address[j].pincode %><br />
                <strong>Phone:</strong> <%= addresses[i].address[j].phone %><br />
                <strong>Alternate:</strong> <%=
                addresses[i].address[j].alternatePhone %>
              </address>

              <div class="address-actions">
                <a
                  href="/editAddress/<%= addresses[i].address[j]._id %>"
                  class="edit"
                >
                  <i class="fi fi-rs-edit"></i> Edit
                </a>
                <a
                  onclick="deleteAddress('<%= addresses[i].address[j]._id %>')"
                  class="delete"
                >
                  <i class="fi fi-rs-trash"></i> Delete
                </a>
              </div>
            </div>
            <% } %> <% } %> <% } else { %>
            <div class="no-address">
              <p>No addresses found. Add a new address to get started.</p>
            </div>
            <% } %>
          </div>
        </div>
      </div>
    </div>
  </section>
</main>

<!--=============== MAIN JS ===============-->

<!-- Add SweetAlert2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@7.12.15/dist/sweetalert2.all.min.js"></script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="/scripts/users/addressDetails.js"></script>

<%- include("../layouts/users/footer.ejs") %>
